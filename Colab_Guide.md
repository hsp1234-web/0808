> **[Jules's Note]**
> 本文件描述的是專案早期 V33 架構下的 Colab 操作流程。此流程基於「執行時建立虛擬環境」的模型，此模型已被後續的「預烘烤環境」架構取代。本文件僅供歷史參考。

---

# 📖 Google Colab 操作指南 (V33)

歡迎使用鳳凰之心專案的 Colab 操作介面。本指南將引導您如何使用我們專為 Colab 設計的啟動器，體驗一個視覺化、互動式的應用程式執行流程。

本專案的 Colab 工作流程，是基於一個**前端與後端完全分離**的現代化架構。您在 Colab 中執行的，是一個輕量級的「前端指揮中心」，它會自動在背景啟動一個穩定、可靠、且環境完全隔離的「後端服務」。

---

## 🚀 快速開始：兩步完成所有操作

在 Colab 中執行本專案，您只需要依序執行兩個儲存格 (Cell)。

### **第一步：啟動後端服務與儀表板**

這是最主要的操作步驟。

1.  **準備程式碼**: 複製 `run/colab_runner.py` 檔案的完整內容。
2.  **貼上並執行**: 將複製的程式碼貼到 Colab 的一個儲存格中，然後點擊「執行」。
3.  **觀察儀表板**:
    *   執行後，一個 HTML 儀表板會立刻出現在輸出區域。
    *   與此同時，後端服務已在背景開始建立虛擬環境、安裝依賴。儀表板上的「後端階段」會即時顯示目前的進度 (例如：`建立後端專用虛擬環境`, `安裝核心依賴` 等)。
    *   當您看到後端階段顯示為「服務運行中」時，代表後端 API 服務已成功啟動。
4.  **結束任務**:
    *   您可以讓後端服務持續運行。
    *   當您想結束任務時，只需點擊 Colab 儲存格旁邊的「停止」按鈕，或使用 `執行階段 -> 中斷執行`。
    *   `colab_runner.py` 腳本會捕捉到這個中斷信號，並自動嘗試優雅地關閉後端服務。

---

### **第二步：生成並查看任務報告**

在第一個儲存格被手動中斷，且後端服務完全關閉後，您可以執行此步驟來查看本次任務的最終報告。

1.  **準備程式碼**: 複製 `run/report.py` 檔案的完整內容。
2.  **貼上並執行**: 將程式碼貼到**一個新的** Colab 儲存格中，然後執行。
3.  **查看報告**:
    *   腳本會自動找到由後端服務產生的資料庫 (`logs.sqlite`)。
    *   它會讀取資料庫，並在儲存格輸出中，以 Markdown 的格式顯示一份格式化的「綜合戰情簡報」。

---

## ⚙️ 架構解析：為什麼這樣更穩定？

您可能會好奇，為什麼我們不直接在一個腳本裡做完所有事？這正是新架構的核心優勢所在：

- **職責分離**:
    - `colab_runner.py`: 只負責兩件事：(1) 呼叫後端啟動器 (2) 顯示一個不斷請求後端 API 的儀表板。它非常「輕」。
    - `scripts/start_api_service.py` (由 `colab_runner.py` 在背景呼叫): 這是真正的主力。它負責建立一個**與 Colab 全域環境完全隔離的虛擬環境 (venv)**，並在其中安全地安裝依賴、啟動服務。

- **無懼環境污染**:
    - Colab 的全域 Python 環境經常變化，且可能安裝了各種版本衝突的套件。
    - 我們的後端服務**完全不使用** Colab 的全域環境。它在自己獨立、乾淨的 venv 中運行，因此**極其穩定**，不會受到外部環境的任何影響。

這種設計確保了無論您在何時、何種狀態的 Colab 實例中執行，都能得到一個穩定、可預期的結果。
