> **[Jules's Note]**
> 本文件描述的是一套基於 `git clone` 和 `pip install` 的環境準備流程。此流程已被「預烘烤環境」架構完全取代，因為在目前的目標環境中，所有程式碼和依賴都已預先提供。本文件僅供歷史參考。

---

# 附錄：安全下載與環境準備標準作業程序 (SOP)

本文檔旨在記錄一套經過驗證的、安全的標準作業程序，用於在不執行任何潛在不穩定程式碼的前提下，下載並準備任一特定分支的完整、隔離的開發環境。

此程序對於在修復重大 BUG（如 `1.0.8` 版本遇到的核心崩潰問題）前，需要對目標分支程式碼進行靜態分析的場景，至關重要。

## 核心原則

- **完全隔離**：所有操作都在一個新建的、與主工作區完全隔離的臨時目錄中進行，避免任何形式的檔案汙染或衝突。
- **僅準備，不執行**：此程序的唯一目標是準備好一個包含完整程式碼和依賴的環境。它**絕不**會執行任何應用程式的啟動邏輯。
- **版本精確**：可以精確指定要下載的 Git 分支或標籤 (Tag)。

## 標準作業流程

此流程的核心是透過一個專門的 Python 腳本（例如 `tools/colab_runner_local_tester.py` 的一個變體）來自動化完成。

1.  **建立臨時工作目錄**：
    - 腳本首先在專案根目錄下建立一個臨時資料夾（例如 `WEB1_local_test`）。所有後續操作都在此目錄內完成。

2.  **精確克隆目標分支**：
    - 使用 `git clone` 指令，並透過 `--branch` 參數，只 `clone` 指定的目標分支（例如 `0.8.1` 或 `1.0.8`）到臨時目錄中。
    - 使用 `--depth 1` 進行淺克隆，可以顯著加快下載速度。

3.  **建立獨立的虛擬環境**：
    - 在臨時目錄中使用 `uv venv` 指令，建立一個全新的、乾淨的 Python 虛擬環境（例如 `.venv`）。
    - 這個虛擬環境與系統全域的 Python 環境，以及主工作區可能存在的其他虛擬環境完全無關。

4.  **安裝依賴**：
    - 使用 `uv pip install -r <需求檔案路徑>` 指令，將該分支版本所對應的所有依賴項，安裝到這個全新的虛擬環境中。

## 產出與應用

執行完此 SOP 後，我們將得到：

- 一個包含了目標分支（例如 `1.0.8`）完整程式碼的資料夾。
- 一個包含了所有對應依賴的、可用的虛擬環境。

此時，開發者可以安全地：
- 使用 `read_file` 或 `ls` 等工具，去閱讀和分析這個隔離目錄中的任何檔案，以了解其程式碼邏輯。
- 在不擔心觸發系統崩潰的前提下，為後續的修復工作制定精確的計畫。

這個標準作業程序是我們應對重大、不穩定 BUG 時，進行前期偵察和靜態分析的基石。
