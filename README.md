# 🚀 鳳凰之心 (Phoenix Heart) 專案 V65 - 核心啟動器架構 🚀

歡迎來到鳳凰之心，一個從單體架構中浴火重生的現代化後端專案。本專案現已進化至 **V65**，搭載了以**單一「核心啟動器」為驅動的、極其穩健的**執行架構，旨在確保在任何環境（無論是本地開發、CI/CD 還是 Google Colab）中都有一致且可靠的表現。

它不僅是一個展示模組化設計的範例，更是一個具備高度穩定性、可測試性和可維護性的專業開發框架。

---

## 一、 核心理念與架構 (Core Philosophy & Architecture)

我們的架構基於以下四大核心理念：

- **單一事實來源 (Single Source of Truth)**: 所有關於環境建立、依賴安裝、應用啟動的複雜邏輯，都由唯一的 `scripts/launch.py` 腳本負責。
- **職責分離 (Separation of Concerns)**:
    - **核心啟動器 (`scripts/launch.py`)**: 作為專案的「引擎室」，只專注於準備好一個可運行的環境並啟動服務。
    - **編排者 (`run/colab_runner.py`, `local_run.py`)**: 作為「駕駛艙」，只負責**呼叫**核心啟動器，並根據自身需求（例如 Colab 的 UI 顯示或本地的自動化測試）與之互動。
- **環境一致性 (Environment Consistency)**: 由於所有入口點最終都呼叫同一個核心啟動器，我們從根本上解決了因環境差異導致的「在我的電腦上可以跑」問題。
- **測試驅動開發 (Test-Driven Development)**: 我們為最複雜、最容易出錯的「核心啟動器」建立了專門的整合測試 (`tests/test_launcher.py`)，確保了架構的健壯性。

### 核心工具鏈 (V65):

- **`scripts/launch.py`**: ✨ **核心啟動器**。本專案的**唯一引擎**，可在任何標準 Linux 環境中，從零開始全自動地完成環境建立、依賴安裝與應用程式啟動。
- **`run/colab_runner.py`**: **Colab 前端指揮中心**。專為 Google Colab 設計的**視覺化介面啟動器**。它會呼叫核心啟動器，並為使用者提供一個動態的狀態儀表板。
- **`local_run.py`**: **本地自動化測試器**。一個輕量級的腳本，用於在本地呼叫核心啟動器，並透過「看門狗」機制驗證其是否成功啟動，主要用於 CI/CD 或快速的本地健康檢查。
- **`tests/test_launcher.py`**: **整合測試**。用於在交付前，模擬 Colab 環境的行為，對核心啟動器進行完整的端對端測試。

---

## 二、 如何開始 (Getting Started)

本專案提供兩種主要的使用情境：

### 2.1. 在本地環境進行開發與測試 (推薦)

**選項 A: 執行自動化健康檢查**
此方式會啟動伺服器，驗證其成功運行，然後自動關閉。非常適合 CI/CD 或快速驗證。

```bash
# 進入專案根目錄，執行此命令
python local_run.py
```

**選項 B: 永久運行伺服器進行開發**
此方式會啟動伺服器並使其持續運行，方便您進行 API 調試或前端對接。

```bash
# 進入專案根目錄，執行此命令
python scripts/launch.py
```
若需指定不同埠號，可使用 `--port` 參數：
```bash
python scripts/launch.py --port 8888
```

### 2.2. 在 Google Colab 中進行視覺化部署

此方式提供了一個互動式的儀表板，讓您能直觀地看到所有執行過程。

**步驟：**
1.  在 Colab 儲存格中貼上並執行 `run/colab_runner.py` 的內容。
2.  腳本會自動處理所有後端環境的下載、安裝與啟動，並在儀表板上即時更新狀態。
3.  當看到代理連結出現時，表示後端服務已就緒。
4.  中斷 (Interrupt) Colab 儲存格的執行即可優雅地關閉所有服務。

---

## 三、 檔案結構總覽 (V65)

以下是重構後的高層次檔案結構。更詳細的架構藍圖、設計哲學及每個模組的深入說明，請參閱 **`docs/`** 目錄下的相關文件。

```
.
├── README.md
├── docs/                  # 專案文件 (架構圖、變更日誌、經驗總結)
├── requirements/          # 統一的依賴管理
├── run/                   # Colab 專用啟動器
│   └── colab_runner.py
├── scripts/               # 核心工具腳本
│   └── launch.py
├── src/                   # 專案原始碼
│   └── phoenix_core/
├── tests/                 # 測試碼
│   ├── __init__.py
│   └── test_launcher.py
└── local_run.py           # 本地自動化測試器
```
