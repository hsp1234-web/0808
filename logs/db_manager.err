2025-08-11 23:56:10,957 - DBManagerServer - INFO - 資料庫管理者伺服器啟動前，正在進行資料庫初始化...
2025-08-11 23:56:10,957 - db.database - INFO - 正在檢查並初始化資料庫於: /app/db/queue.db
2025-08-11 23:56:10,983 - db.database - INFO - ✅ 資料庫初始化完成。`tasks` 和 `system_logs` 資料表已存在。
2025-08-11 23:56:10,985 - DBManagerServer - INFO - ✅ 資料庫初始化成功。
2025-08-11 23:56:10,986 - DBManagerServer - INFO - 🚀 資料庫管理者伺服器已在 127.0.0.1:49999 上啟動...
2025-08-11 23:57:04,259 - DBManagerServer - INFO - 資料庫管理者伺服器啟動前，正在進行資料庫初始化...
2025-08-11 23:57:04,259 - db.database - INFO - 正在檢查並初始化資料庫於: /app/db/queue.db
2025-08-11 23:57:04,280 - db.database - INFO - ✅ 資料庫初始化完成。`tasks` 和 `system_logs` 資料表已存在。
2025-08-11 23:57:04,282 - DBManagerServer - INFO - ✅ 資料庫初始化成功。
2025-08-11 23:57:04,283 - DBManagerServer - INFO - 🚀 資料庫管理者伺服器已在 127.0.0.1:49999 上啟動...
2025-08-11 23:57:05,911 - DBManagerServer - INFO - 來自 ('127.0.0.1', 58710) 的新連線。
2025-08-11 23:57:05,912 - DBManagerServer - INFO - 收到請求: {'action': 'add_task', 'params': {'task_id': 'c7d3a445-a445-41ba-83ff-e8f9d1380906', 'payload': '{"url": "https://www.youtube.com/watch?v=jNQXAC9IVRw", "output_dir": "/app/uploads", "custom_filename": ""}', 'task_type': 'youtube_download', 'depends_on': None}}
2025-08-11 23:57:05,912 - db.database - INFO - DB:/app/db/queue.db 準備新增 'youtube_download' 任務: c7d3a445-a445-41ba-83ff-e8f9d1380906 (依賴: 無)
2025-08-11 23:57:05,915 - db.database - INFO - ✅ 已成功新增任務到佇列: c7d3a445-a445-41ba-83ff-e8f9d1380906
2025-08-11 23:57:05,915 - DBManagerServer - INFO - 連線 ('127.0.0.1', 58710) 已關閉。
2025-08-11 23:57:05,916 - DBManagerServer - INFO - 來自 ('127.0.0.1', 58712) 的新連線。
2025-08-11 23:57:05,916 - DBManagerServer - INFO - 收到請求: {'action': 'add_task', 'params': {'task_id': '2cd02d37-df30-4600-98f9-812f8b34461c', 'payload': '{"model": "models/gemini-1.5-flash-latest", "output_dir": "transcripts", "tasks": "summary,transcript", "output_format": "html"}', 'task_type': 'gemini_process', 'depends_on': 'c7d3a445-a445-41ba-83ff-e8f9d1380906'}}
2025-08-11 23:57:05,917 - db.database - INFO - DB:/app/db/queue.db 準備新增 'gemini_process' 任務: 2cd02d37-df30-4600-98f9-812f8b34461c (依賴: c7d3a445-a445-41ba-83ff-e8f9d1380906)
2025-08-11 23:57:05,919 - db.database - INFO - ✅ 已成功新增任務到佇列: 2cd02d37-df30-4600-98f9-812f8b34461c
2025-08-11 23:57:05,920 - DBManagerServer - INFO - 連線 ('127.0.0.1', 58712) 已關閉。
2025-08-11 23:57:05,940 - DBManagerServer - INFO - 來自 ('127.0.0.1', 58714) 的新連線。
2025-08-11 23:57:05,940 - DBManagerServer - INFO - 收到請求: {'action': 'get_task_status', 'params': {'task_id': 'c7d3a445-a445-41ba-83ff-e8f9d1380906'}}
2025-08-11 23:57:05,941 - DBManagerServer - INFO - 連線 ('127.0.0.1', 58714) 已關閉。
2025-08-11 23:57:05,945 - DBManagerServer - INFO - 來自 ('127.0.0.1', 58716) 的新連線。
2025-08-11 23:57:05,946 - DBManagerServer - INFO - 收到請求: {'action': 'get_task_status', 'params': {'task_id': 'c7d3a445-a445-41ba-83ff-e8f9d1380906'}}
2025-08-11 23:57:05,947 - DBManagerServer - INFO - 連線 ('127.0.0.1', 58716) 已關閉。
2025-08-11 23:57:06,244 - DBManagerServer - INFO - 來自 ('127.0.0.1', 58724) 的新連線。
2025-08-11 23:57:06,244 - DBManagerServer - INFO - 收到請求: {'action': 'update_task_status', 'params': {'task_id': 'c7d3a445-a445-41ba-83ff-e8f9d1380906', 'status': 'completed', 'result': '{"type": "result", "status": "completed", "output_path": "/app/uploads/dummy_audio.wav", "video_title": "\\u3010\\u5927\\u795e\\u5e6b\\u5e6b\\u5fd9\\u3011\\u5c0e\\u6f14\\u7684\\u5275\\u696d\\u8ac7 feat.\\u6a13\\u4e00\\u5b89\\u5c0e\\u6f14\\u3001\\u694a\\u8cb4\\u5a9a\\u3001\\u8521\\u6dd1\\u81fb\\u3001\\u83ab\\u5b50\\u5100", "duration_seconds": 55}'}}
2025-08-11 23:57:06,248 - db.database - INFO - ✅ 任務 c7d3a445-a445-41ba-83ff-e8f9d1380906 狀態已更新為: completed
2025-08-11 23:57:06,249 - DBManagerServer - INFO - 連線 ('127.0.0.1', 58724) 已關閉。
2025-08-11 23:57:06,249 - DBManagerServer - INFO - 來自 ('127.0.0.1', 58736) 的新連線。
2025-08-11 23:57:06,249 - DBManagerServer - INFO - 收到請求: {'action': 'find_dependent_task', 'params': {'parent_task_id': 'c7d3a445-a445-41ba-83ff-e8f9d1380906'}}
2025-08-11 23:57:06,251 - DBManagerServer - INFO - 連線 ('127.0.0.1', 58736) 已關閉。
2025-08-11 23:57:06,251 - DBManagerServer - INFO - 來自 ('127.0.0.1', 58750) 的新連線。
2025-08-11 23:57:06,251 - DBManagerServer - INFO - 收到請求: {'action': 'get_task_status', 'params': {'task_id': '2cd02d37-df30-4600-98f9-812f8b34461c'}}
2025-08-11 23:57:06,252 - DBManagerServer - INFO - 連線 ('127.0.0.1', 58750) 已關閉。
2025-08-11 23:57:08,146 - DBManagerServer - INFO - 來自 ('127.0.0.1', 58756) 的新連線。
2025-08-11 23:57:08,146 - DBManagerServer - INFO - 收到請求: {'action': 'update_task_status', 'params': {'task_id': '2cd02d37-df30-4600-98f9-812f8b34461c', 'status': 'failed', 'result': '{"error": "Gemini processor failed with exit code 1. Stderr: {\\"type\\": \\"result\\", \\"status\\": \\"failed\\", \\"error\\": \\"GOOGLE_API_KEY environment variable not set.\\"}\\n"}'}}
2025-08-11 23:57:08,149 - db.database - INFO - ✅ 任務 2cd02d37-df30-4600-98f9-812f8b34461c 狀態已更新為: failed
2025-08-11 23:57:08,150 - DBManagerServer - INFO - 連線 ('127.0.0.1', 58756) 已關閉。
2025-08-11 23:57:10,955 - DBManagerServer - INFO - 來自 ('127.0.0.1', 58772) 的新連線。
2025-08-11 23:57:10,955 - DBManagerServer - INFO - 收到請求: {'action': 'get_task_status', 'params': {'task_id': 'c7d3a445-a445-41ba-83ff-e8f9d1380906'}}
2025-08-11 23:57:10,956 - DBManagerServer - INFO - 連線 ('127.0.0.1', 58772) 已關閉。
2025-08-11 23:57:10,962 - DBManagerServer - INFO - 來自 ('127.0.0.1', 58776) 的新連線。
2025-08-11 23:57:10,962 - DBManagerServer - INFO - 收到請求: {'action': 'get_task_status', 'params': {'task_id': 'c7d3a445-a445-41ba-83ff-e8f9d1380906'}}
2025-08-11 23:57:10,963 - DBManagerServer - INFO - 連線 ('127.0.0.1', 58776) 已關閉。
2025-08-11 23:57:42,030 - DBManagerServer - INFO - 資料庫管理者伺服器啟動前，正在進行資料庫初始化...
2025-08-11 23:57:42,030 - db.database - INFO - 正在檢查並初始化資料庫於: /app/db/queue.db
2025-08-11 23:57:42,044 - db.database - INFO - ✅ 資料庫初始化完成。`tasks` 和 `system_logs` 資料表已存在。
2025-08-11 23:57:42,046 - DBManagerServer - INFO - ✅ 資料庫初始化成功。
2025-08-11 23:57:42,046 - DBManagerServer - INFO - 🚀 資料庫管理者伺服器已在 127.0.0.1:49999 上啟動...
2025-08-11 23:57:43,735 - DBManagerServer - INFO - 來自 ('127.0.0.1', 34168) 的新連線。
2025-08-11 23:57:43,736 - DBManagerServer - INFO - 收到請求: {'action': 'add_task', 'params': {'task_id': 'f27a157c-6bac-4d4e-bac6-a09ac9c5234c', 'payload': '{"url": "https://www.youtube.com/watch?v=jNQXAC9IVRw", "output_dir": "/app/uploads", "custom_filename": ""}', 'task_type': 'youtube_download', 'depends_on': None}}
2025-08-11 23:57:43,736 - db.database - INFO - DB:/app/db/queue.db 準備新增 'youtube_download' 任務: f27a157c-6bac-4d4e-bac6-a09ac9c5234c (依賴: 無)
2025-08-11 23:57:43,738 - db.database - INFO - ✅ 已成功新增任務到佇列: f27a157c-6bac-4d4e-bac6-a09ac9c5234c
2025-08-11 23:57:43,739 - DBManagerServer - INFO - 連線 ('127.0.0.1', 34168) 已關閉。
2025-08-11 23:57:43,740 - DBManagerServer - INFO - 來自 ('127.0.0.1', 34178) 的新連線。
2025-08-11 23:57:43,740 - DBManagerServer - INFO - 收到請求: {'action': 'add_task', 'params': {'task_id': '35c5779b-3ca1-4952-a97d-16e1ca6bfa0e', 'payload': '{"model": "models/gemini-1.5-flash-latest", "output_dir": "transcripts", "tasks": "summary,transcript", "output_format": "html"}', 'task_type': 'gemini_process', 'depends_on': 'f27a157c-6bac-4d4e-bac6-a09ac9c5234c'}}
2025-08-11 23:57:43,740 - db.database - INFO - DB:/app/db/queue.db 準備新增 'gemini_process' 任務: 35c5779b-3ca1-4952-a97d-16e1ca6bfa0e (依賴: f27a157c-6bac-4d4e-bac6-a09ac9c5234c)
2025-08-11 23:57:43,742 - db.database - INFO - ✅ 已成功新增任務到佇列: 35c5779b-3ca1-4952-a97d-16e1ca6bfa0e
2025-08-11 23:57:43,743 - DBManagerServer - INFO - 連線 ('127.0.0.1', 34178) 已關閉。
2025-08-11 23:57:43,758 - DBManagerServer - INFO - 來自 ('127.0.0.1', 34188) 的新連線。
2025-08-11 23:57:43,758 - DBManagerServer - INFO - 收到請求: {'action': 'get_task_status', 'params': {'task_id': 'f27a157c-6bac-4d4e-bac6-a09ac9c5234c'}}
2025-08-11 23:57:43,759 - DBManagerServer - INFO - 連線 ('127.0.0.1', 34188) 已關閉。
2025-08-11 23:57:43,761 - DBManagerServer - INFO - 來自 ('127.0.0.1', 34190) 的新連線。
2025-08-11 23:57:43,761 - DBManagerServer - INFO - 收到請求: {'action': 'get_task_status', 'params': {'task_id': 'f27a157c-6bac-4d4e-bac6-a09ac9c5234c'}}
2025-08-11 23:57:43,762 - DBManagerServer - INFO - 連線 ('127.0.0.1', 34190) 已關閉。
2025-08-11 23:57:43,949 - DBManagerServer - INFO - 來自 ('127.0.0.1', 34206) 的新連線。
2025-08-11 23:57:43,949 - DBManagerServer - INFO - 收到請求: {'action': 'update_task_status', 'params': {'task_id': 'f27a157c-6bac-4d4e-bac6-a09ac9c5234c', 'status': 'completed', 'result': '{"type": "result", "status": "completed", "output_path": "/app/uploads/dummy_audio.wav", "video_title": "\\u3010\\u5927\\u795e\\u5e6b\\u5e6b\\u5fd9\\u3011\\u5c0e\\u6f14\\u7684\\u5275\\u696d\\u8ac7 feat.\\u6a13\\u4e00\\u5b89\\u5c0e\\u6f14\\u3001\\u694a\\u8cb4\\u5a9a\\u3001\\u8521\\u6dd1\\u81fb\\u3001\\u83ab\\u5b50\\u5100", "duration_seconds": 55}'}}
2025-08-11 23:57:43,951 - db.database - INFO - ✅ 任務 f27a157c-6bac-4d4e-bac6-a09ac9c5234c 狀態已更新為: completed
2025-08-11 23:57:43,952 - DBManagerServer - INFO - 連線 ('127.0.0.1', 34206) 已關閉。
2025-08-11 23:57:43,952 - DBManagerServer - INFO - 來自 ('127.0.0.1', 34216) 的新連線。
2025-08-11 23:57:43,952 - DBManagerServer - INFO - 收到請求: {'action': 'find_dependent_task', 'params': {'parent_task_id': 'f27a157c-6bac-4d4e-bac6-a09ac9c5234c'}}
2025-08-11 23:57:43,953 - DBManagerServer - INFO - 連線 ('127.0.0.1', 34216) 已關閉。
2025-08-11 23:57:43,954 - DBManagerServer - INFO - 來自 ('127.0.0.1', 34222) 的新連線。
2025-08-11 23:57:43,954 - DBManagerServer - INFO - 收到請求: {'action': 'get_task_status', 'params': {'task_id': '35c5779b-3ca1-4952-a97d-16e1ca6bfa0e'}}
2025-08-11 23:57:43,955 - DBManagerServer - INFO - 連線 ('127.0.0.1', 34222) 已關閉。
2025-08-11 23:57:45,164 - DBManagerServer - INFO - 來自 ('127.0.0.1', 34238) 的新連線。
2025-08-11 23:57:45,164 - DBManagerServer - INFO - 收到請求: {'action': 'update_task_status', 'params': {'task_id': '35c5779b-3ca1-4952-a97d-16e1ca6bfa0e', 'status': 'failed', 'result': '{"error": "Gemini processor failed with exit code 1. Stderr: {\\"type\\": \\"result\\", \\"status\\": \\"failed\\", \\"error\\": \\"GOOGLE_API_KEY environment variable not set.\\"}\\n"}'}}
2025-08-11 23:57:45,166 - db.database - INFO - ✅ 任務 35c5779b-3ca1-4952-a97d-16e1ca6bfa0e 狀態已更新為: failed
2025-08-11 23:57:45,167 - DBManagerServer - INFO - 連線 ('127.0.0.1', 34238) 已關閉。
2025-08-11 23:57:48,768 - DBManagerServer - INFO - 來自 ('127.0.0.1', 34246) 的新連線。
2025-08-11 23:57:48,768 - DBManagerServer - INFO - 收到請求: {'action': 'get_task_status', 'params': {'task_id': 'f27a157c-6bac-4d4e-bac6-a09ac9c5234c'}}
2025-08-11 23:57:48,770 - DBManagerServer - INFO - 連線 ('127.0.0.1', 34246) 已關閉。
2025-08-11 23:57:48,776 - DBManagerServer - INFO - 來自 ('127.0.0.1', 34258) 的新連線。
2025-08-11 23:57:48,776 - DBManagerServer - INFO - 收到請求: {'action': 'get_task_status', 'params': {'task_id': 'f27a157c-6bac-4d4e-bac6-a09ac9c5234c'}}
2025-08-11 23:57:48,777 - DBManagerServer - INFO - 連線 ('127.0.0.1', 34258) 已關閉。
2025-08-11 23:58:52,898 - DBManagerServer - INFO - 資料庫管理者伺服器啟動前，正在進行資料庫初始化...
2025-08-11 23:58:52,898 - db.database - INFO - 正在檢查並初始化資料庫於: /app/db/queue.db
2025-08-11 23:58:52,916 - db.database - INFO - ✅ 資料庫初始化完成。`tasks` 和 `system_logs` 資料表已存在。
2025-08-11 23:58:52,919 - DBManagerServer - INFO - ✅ 資料庫初始化成功。
2025-08-11 23:58:52,919 - DBManagerServer - INFO - 🚀 資料庫管理者伺服器已在 127.0.0.1:49999 上啟動...
2025-08-11 23:58:54,584 - DBManagerServer - INFO - 來自 ('127.0.0.1', 44934) 的新連線。
2025-08-11 23:58:54,584 - DBManagerServer - INFO - 收到請求: {'action': 'add_task', 'params': {'task_id': '75db1ee9-fb63-4127-a9ac-f03bb70df5e1', 'payload': '{"url": "https://www.youtube.com/watch?v=jNQXAC9IVRw", "output_dir": "/app/uploads", "custom_filename": ""}', 'task_type': 'youtube_download', 'depends_on': None}}
2025-08-11 23:58:54,585 - db.database - INFO - DB:/app/db/queue.db 準備新增 'youtube_download' 任務: 75db1ee9-fb63-4127-a9ac-f03bb70df5e1 (依賴: 無)
2025-08-11 23:58:54,588 - db.database - INFO - ✅ 已成功新增任務到佇列: 75db1ee9-fb63-4127-a9ac-f03bb70df5e1
2025-08-11 23:58:54,589 - DBManagerServer - INFO - 連線 ('127.0.0.1', 44934) 已關閉。
2025-08-11 23:58:54,590 - DBManagerServer - INFO - 來自 ('127.0.0.1', 44944) 的新連線。
2025-08-11 23:58:54,590 - DBManagerServer - INFO - 收到請求: {'action': 'add_task', 'params': {'task_id': '8beb3c42-9d99-4949-9521-562a350dd693', 'payload': '{"model": "models/gemini-1.5-flash-latest", "output_dir": "transcripts", "tasks": "summary,transcript", "output_format": "html"}', 'task_type': 'gemini_process', 'depends_on': '75db1ee9-fb63-4127-a9ac-f03bb70df5e1'}}
2025-08-11 23:58:54,591 - db.database - INFO - DB:/app/db/queue.db 準備新增 'gemini_process' 任務: 8beb3c42-9d99-4949-9521-562a350dd693 (依賴: 75db1ee9-fb63-4127-a9ac-f03bb70df5e1)
2025-08-11 23:58:54,594 - db.database - INFO - ✅ 已成功新增任務到佇列: 8beb3c42-9d99-4949-9521-562a350dd693
2025-08-11 23:58:54,594 - DBManagerServer - INFO - 連線 ('127.0.0.1', 44944) 已關閉。
2025-08-11 23:58:54,620 - DBManagerServer - INFO - 來自 ('127.0.0.1', 44954) 的新連線。
2025-08-11 23:58:54,620 - DBManagerServer - INFO - 收到請求: {'action': 'get_task_status', 'params': {'task_id': '75db1ee9-fb63-4127-a9ac-f03bb70df5e1'}}
2025-08-11 23:58:54,622 - DBManagerServer - INFO - 連線 ('127.0.0.1', 44954) 已關閉。
2025-08-11 23:58:54,626 - DBManagerServer - INFO - 來自 ('127.0.0.1', 44964) 的新連線。
2025-08-11 23:58:54,626 - DBManagerServer - INFO - 收到請求: {'action': 'get_task_status', 'params': {'task_id': '75db1ee9-fb63-4127-a9ac-f03bb70df5e1'}}
2025-08-11 23:58:54,627 - DBManagerServer - INFO - 連線 ('127.0.0.1', 44964) 已關閉。
2025-08-11 23:58:54,846 - DBManagerServer - INFO - 來自 ('127.0.0.1', 44970) 的新連線。
2025-08-11 23:58:54,847 - DBManagerServer - INFO - 收到請求: {'action': 'update_task_status', 'params': {'task_id': '75db1ee9-fb63-4127-a9ac-f03bb70df5e1', 'status': 'completed', 'result': '{"type": "result", "status": "completed", "output_path": "/app/uploads/dummy_audio.wav", "video_title": "\\u3010\\u5927\\u795e\\u5e6b\\u5e6b\\u5fd9\\u3011\\u5c0e\\u6f14\\u7684\\u5275\\u696d\\u8ac7 feat.\\u6a13\\u4e00\\u5b89\\u5c0e\\u6f14\\u3001\\u694a\\u8cb4\\u5a9a\\u3001\\u8521\\u6dd1\\u81fb\\u3001\\u83ab\\u5b50\\u5100", "duration_seconds": 55}'}}
2025-08-11 23:58:54,849 - db.database - INFO - ✅ 任務 75db1ee9-fb63-4127-a9ac-f03bb70df5e1 狀態已更新為: completed
2025-08-11 23:58:54,850 - DBManagerServer - INFO - 連線 ('127.0.0.1', 44970) 已關閉。
2025-08-11 23:58:54,851 - DBManagerServer - INFO - 來自 ('127.0.0.1', 44984) 的新連線。
2025-08-11 23:58:54,851 - DBManagerServer - INFO - 收到請求: {'action': 'find_dependent_task', 'params': {'parent_task_id': '75db1ee9-fb63-4127-a9ac-f03bb70df5e1'}}
2025-08-11 23:58:54,852 - DBManagerServer - INFO - 連線 ('127.0.0.1', 44984) 已關閉。
2025-08-11 23:58:54,852 - DBManagerServer - INFO - 來自 ('127.0.0.1', 44992) 的新連線。
2025-08-11 23:58:54,852 - DBManagerServer - INFO - 收到請求: {'action': 'get_task_status', 'params': {'task_id': '8beb3c42-9d99-4949-9521-562a350dd693'}}
2025-08-11 23:58:54,854 - DBManagerServer - INFO - 連線 ('127.0.0.1', 44992) 已關閉。
2025-08-11 23:58:56,220 - DBManagerServer - INFO - 來自 ('127.0.0.1', 45008) 的新連線。
2025-08-11 23:58:56,220 - DBManagerServer - INFO - 收到請求: {'action': 'update_task_status', 'params': {'task_id': '8beb3c42-9d99-4949-9521-562a350dd693', 'status': 'failed', 'result': '{"error": "Gemini processor failed with exit code 1. Stderr: {\\"type\\": \\"result\\", \\"status\\": \\"failed\\", \\"error\\": \\"GOOGLE_API_KEY environment variable not set.\\"}\\n"}'}}
2025-08-11 23:58:56,223 - db.database - INFO - ✅ 任務 8beb3c42-9d99-4949-9521-562a350dd693 狀態已更新為: failed
2025-08-11 23:58:56,224 - DBManagerServer - INFO - 連線 ('127.0.0.1', 45008) 已關閉。
2025-08-11 23:58:59,636 - DBManagerServer - INFO - 來自 ('127.0.0.1', 45012) 的新連線。
2025-08-11 23:58:59,636 - DBManagerServer - INFO - 收到請求: {'action': 'get_task_status', 'params': {'task_id': '75db1ee9-fb63-4127-a9ac-f03bb70df5e1'}}
2025-08-11 23:58:59,637 - DBManagerServer - INFO - 連線 ('127.0.0.1', 45012) 已關閉。
2025-08-11 23:58:59,643 - DBManagerServer - INFO - 來自 ('127.0.0.1', 45020) 的新連線。
2025-08-11 23:58:59,643 - DBManagerServer - INFO - 收到請求: {'action': 'get_task_status', 'params': {'task_id': '75db1ee9-fb63-4127-a9ac-f03bb70df5e1'}}
2025-08-11 23:58:59,644 - DBManagerServer - INFO - 連線 ('127.0.0.1', 45020) 已關閉。
2025-08-11 23:59:37,879 - DBManagerServer - INFO - 資料庫管理者伺服器啟動前，正在進行資料庫初始化...
2025-08-11 23:59:37,879 - db.database - INFO - 正在檢查並初始化資料庫於: /app/db/queue.db
2025-08-11 23:59:37,897 - db.database - INFO - ✅ 資料庫初始化完成。`tasks` 和 `system_logs` 資料表已存在。
2025-08-11 23:59:37,900 - DBManagerServer - INFO - ✅ 資料庫初始化成功。
2025-08-11 23:59:37,900 - DBManagerServer - INFO - 🚀 資料庫管理者伺服器已在 127.0.0.1:49999 上啟動...
2025-08-11 23:59:39,510 - DBManagerServer - INFO - 來自 ('127.0.0.1', 47108) 的新連線。
2025-08-11 23:59:39,510 - DBManagerServer - INFO - 收到請求: {'action': 'add_task', 'params': {'task_id': '5fe2e17f-a4d5-47b7-a455-fa7b1921dafd', 'payload': '{"url": "https://www.youtube.com/watch?v=jNQXAC9IVRw", "output_dir": "/app/uploads", "custom_filename": ""}', 'task_type': 'youtube_download', 'depends_on': None}}
2025-08-11 23:59:39,511 - db.database - INFO - DB:/app/db/queue.db 準備新增 'youtube_download' 任務: 5fe2e17f-a4d5-47b7-a455-fa7b1921dafd (依賴: 無)
2025-08-11 23:59:39,513 - db.database - INFO - ✅ 已成功新增任務到佇列: 5fe2e17f-a4d5-47b7-a455-fa7b1921dafd
2025-08-11 23:59:39,514 - DBManagerServer - INFO - 連線 ('127.0.0.1', 47108) 已關閉。
2025-08-11 23:59:39,515 - DBManagerServer - INFO - 來自 ('127.0.0.1', 47118) 的新連線。
2025-08-11 23:59:39,515 - DBManagerServer - INFO - 收到請求: {'action': 'add_task', 'params': {'task_id': 'fe281860-43f1-4685-a5fc-7b2a8323b499', 'payload': '{"model": "models/gemini-1.5-flash-latest", "output_dir": "transcripts", "tasks": "summary,transcript", "output_format": "html"}', 'task_type': 'gemini_process', 'depends_on': '5fe2e17f-a4d5-47b7-a455-fa7b1921dafd'}}
2025-08-11 23:59:39,515 - db.database - INFO - DB:/app/db/queue.db 準備新增 'gemini_process' 任務: fe281860-43f1-4685-a5fc-7b2a8323b499 (依賴: 5fe2e17f-a4d5-47b7-a455-fa7b1921dafd)
2025-08-11 23:59:39,518 - db.database - INFO - ✅ 已成功新增任務到佇列: fe281860-43f1-4685-a5fc-7b2a8323b499
2025-08-11 23:59:39,518 - DBManagerServer - INFO - 連線 ('127.0.0.1', 47118) 已關閉。
2025-08-11 23:59:39,530 - DBManagerServer - INFO - 來自 ('127.0.0.1', 47126) 的新連線。
2025-08-11 23:59:39,530 - DBManagerServer - INFO - 收到請求: {'action': 'find_dependent_task', 'params': {'parent_task_id': '5fe2e17f-a4d5-47b7-a455-fa7b1921dafd'}}
2025-08-11 23:59:39,531 - DBManagerServer - INFO - 連線 ('127.0.0.1', 47126) 已關閉。
2025-08-11 23:59:39,536 - DBManagerServer - INFO - 來自 ('127.0.0.1', 47128) 的新連線。
2025-08-11 23:59:39,536 - DBManagerServer - INFO - 收到請求: {'action': 'get_task_status', 'params': {'task_id': '5fe2e17f-a4d5-47b7-a455-fa7b1921dafd'}}
2025-08-11 23:59:39,537 - DBManagerServer - INFO - 連線 ('127.0.0.1', 47128) 已關閉。
2025-08-11 23:59:39,540 - DBManagerServer - INFO - 來自 ('127.0.0.1', 47136) 的新連線。
2025-08-11 23:59:39,541 - DBManagerServer - INFO - 收到請求: {'action': 'get_task_status', 'params': {'task_id': 'fe281860-43f1-4685-a5fc-7b2a8323b499'}}
2025-08-11 23:59:39,542 - DBManagerServer - INFO - 連線 ('127.0.0.1', 47136) 已關閉。
2025-08-11 23:59:39,752 - DBManagerServer - INFO - 來自 ('127.0.0.1', 47148) 的新連線。
2025-08-11 23:59:39,752 - DBManagerServer - INFO - 收到請求: {'action': 'update_task_status', 'params': {'task_id': '5fe2e17f-a4d5-47b7-a455-fa7b1921dafd', 'status': 'completed', 'result': '{"type": "result", "status": "completed", "output_path": "/app/uploads/dummy_audio.wav", "video_title": "\\u3010\\u5927\\u795e\\u5e6b\\u5e6b\\u5fd9\\u3011\\u5c0e\\u6f14\\u7684\\u5275\\u696d\\u8ac7 feat.\\u6a13\\u4e00\\u5b89\\u5c0e\\u6f14\\u3001\\u694a\\u8cb4\\u5a9a\\u3001\\u8521\\u6dd1\\u81fb\\u3001\\u83ab\\u5b50\\u5100", "duration_seconds": 55}'}}
2025-08-11 23:59:39,754 - db.database - INFO - ✅ 任務 5fe2e17f-a4d5-47b7-a455-fa7b1921dafd 狀態已更新為: completed
2025-08-11 23:59:39,755 - DBManagerServer - INFO - 連線 ('127.0.0.1', 47148) 已關閉。
2025-08-11 23:59:39,755 - DBManagerServer - INFO - 來自 ('127.0.0.1', 47156) 的新連線。
2025-08-11 23:59:39,755 - DBManagerServer - INFO - 收到請求: {'action': 'find_dependent_task', 'params': {'parent_task_id': '5fe2e17f-a4d5-47b7-a455-fa7b1921dafd'}}
2025-08-11 23:59:39,756 - DBManagerServer - INFO - 連線 ('127.0.0.1', 47156) 已關閉。
2025-08-11 23:59:39,757 - DBManagerServer - INFO - 來自 ('127.0.0.1', 47158) 的新連線。
2025-08-11 23:59:39,757 - DBManagerServer - INFO - 收到請求: {'action': 'get_task_status', 'params': {'task_id': 'fe281860-43f1-4685-a5fc-7b2a8323b499'}}
2025-08-11 23:59:39,758 - DBManagerServer - INFO - 連線 ('127.0.0.1', 47158) 已關閉。
2025-08-11 23:59:40,948 - DBManagerServer - INFO - 來自 ('127.0.0.1', 47168) 的新連線。
2025-08-11 23:59:40,948 - DBManagerServer - INFO - 收到請求: {'action': 'update_task_status', 'params': {'task_id': 'fe281860-43f1-4685-a5fc-7b2a8323b499', 'status': 'failed', 'result': '{"error": "Gemini processor failed with exit code 1. Stderr: {\\"type\\": \\"result\\", \\"status\\": \\"failed\\", \\"error\\": \\"GOOGLE_API_KEY environment variable not set.\\"}\\n"}'}}
2025-08-11 23:59:40,950 - db.database - INFO - ✅ 任務 fe281860-43f1-4685-a5fc-7b2a8323b499 狀態已更新為: failed
2025-08-11 23:59:40,951 - DBManagerServer - INFO - 連線 ('127.0.0.1', 47168) 已關閉。
2025-08-11 23:59:44,550 - DBManagerServer - INFO - 來自 ('127.0.0.1', 37922) 的新連線。
2025-08-11 23:59:44,550 - DBManagerServer - INFO - 收到請求: {'action': 'get_task_status', 'params': {'task_id': 'fe281860-43f1-4685-a5fc-7b2a8323b499'}}
2025-08-11 23:59:44,551 - DBManagerServer - INFO - 連線 ('127.0.0.1', 37922) 已關閉。
2025-08-11 23:59:44,557 - DBManagerServer - INFO - 來自 ('127.0.0.1', 37924) 的新連線。
2025-08-11 23:59:44,557 - DBManagerServer - INFO - 收到請求: {'action': 'get_task_status', 'params': {'task_id': 'fe281860-43f1-4685-a5fc-7b2a8323b499'}}
2025-08-11 23:59:44,558 - DBManagerServer - INFO - 連線 ('127.0.0.1', 37924) 已關閉。
2025-08-12 00:00:13,196 - DBManagerServer - INFO - 資料庫管理者伺服器啟動前，正在進行資料庫初始化...
2025-08-12 00:00:13,196 - db.database - INFO - 正在檢查並初始化資料庫於: /app/db/queue.db
2025-08-12 00:00:13,213 - db.database - INFO - ✅ 資料庫初始化完成。`tasks` 和 `system_logs` 資料表已存在。
2025-08-12 00:00:13,215 - DBManagerServer - INFO - ✅ 資料庫初始化成功。
2025-08-12 00:00:13,215 - DBManagerServer - INFO - 🚀 資料庫管理者伺服器已在 127.0.0.1:49999 上啟動...
2025-08-12 00:00:14,868 - DBManagerServer - INFO - 來自 ('127.0.0.1', 34698) 的新連線。
2025-08-12 00:00:14,868 - DBManagerServer - INFO - 收到請求: {'action': 'add_task', 'params': {'task_id': '6509f377-dfda-4a1a-9997-97645a383531', 'payload': '{"url": "https://www.youtube.com/watch?v=jNQXAC9IVRw", "output_dir": "/app/uploads", "custom_filename": ""}', 'task_type': 'youtube_download', 'depends_on': None}}
2025-08-12 00:00:14,869 - db.database - INFO - DB:/app/db/queue.db 準備新增 'youtube_download' 任務: 6509f377-dfda-4a1a-9997-97645a383531 (依賴: 無)
2025-08-12 00:00:14,873 - db.database - INFO - ✅ 已成功新增任務到佇列: 6509f377-dfda-4a1a-9997-97645a383531
2025-08-12 00:00:14,874 - DBManagerServer - INFO - 連線 ('127.0.0.1', 34698) 已關閉。
2025-08-12 00:00:14,875 - DBManagerServer - INFO - 來自 ('127.0.0.1', 34706) 的新連線。
2025-08-12 00:00:14,875 - DBManagerServer - INFO - 收到請求: {'action': 'add_task', 'params': {'task_id': '468af73e-8c5b-466a-8163-d83e2f7e7f39', 'payload': '{"model": "models/gemini-1.5-flash-latest", "output_dir": "transcripts", "tasks": "summary,transcript", "output_format": "html"}', 'task_type': 'gemini_process', 'depends_on': '6509f377-dfda-4a1a-9997-97645a383531'}}
2025-08-12 00:00:14,875 - db.database - INFO - DB:/app/db/queue.db 準備新增 'gemini_process' 任務: 468af73e-8c5b-466a-8163-d83e2f7e7f39 (依賴: 6509f377-dfda-4a1a-9997-97645a383531)
2025-08-12 00:00:14,878 - db.database - INFO - ✅ 已成功新增任務到佇列: 468af73e-8c5b-466a-8163-d83e2f7e7f39
2025-08-12 00:00:14,879 - DBManagerServer - INFO - 連線 ('127.0.0.1', 34706) 已關閉。
2025-08-12 00:00:14,892 - DBManagerServer - INFO - 來自 ('127.0.0.1', 34716) 的新連線。
2025-08-12 00:00:14,892 - DBManagerServer - INFO - 收到請求: {'action': 'find_dependent_task', 'params': {'parent_task_id': '6509f377-dfda-4a1a-9997-97645a383531'}}
2025-08-12 00:00:14,893 - DBManagerServer - INFO - 連線 ('127.0.0.1', 34716) 已關閉。
2025-08-12 00:00:14,900 - DBManagerServer - INFO - 來自 ('127.0.0.1', 34724) 的新連線。
2025-08-12 00:00:14,901 - DBManagerServer - INFO - 收到請求: {'action': 'get_task_status', 'params': {'task_id': '6509f377-dfda-4a1a-9997-97645a383531'}}
2025-08-12 00:00:14,902 - DBManagerServer - INFO - 連線 ('127.0.0.1', 34724) 已關閉。
2025-08-12 00:00:14,905 - DBManagerServer - INFO - 來自 ('127.0.0.1', 34734) 的新連線。
2025-08-12 00:00:14,905 - DBManagerServer - INFO - 收到請求: {'action': 'get_task_status', 'params': {'task_id': '468af73e-8c5b-466a-8163-d83e2f7e7f39'}}
2025-08-12 00:00:14,906 - DBManagerServer - INFO - 連線 ('127.0.0.1', 34734) 已關閉。
2025-08-12 00:00:15,109 - DBManagerServer - INFO - 來自 ('127.0.0.1', 34744) 的新連線。
2025-08-12 00:00:15,109 - DBManagerServer - INFO - 收到請求: {'action': 'update_task_status', 'params': {'task_id': '6509f377-dfda-4a1a-9997-97645a383531', 'status': 'completed', 'result': '{"type": "result", "status": "completed", "output_path": "/app/uploads/dummy_audio.wav", "video_title": "\\u3010\\u5927\\u795e\\u5e6b\\u5e6b\\u5fd9\\u3011\\u5c0e\\u6f14\\u7684\\u5275\\u696d\\u8ac7 feat.\\u6a13\\u4e00\\u5b89\\u5c0e\\u6f14\\u3001\\u694a\\u8cb4\\u5a9a\\u3001\\u8521\\u6dd1\\u81fb\\u3001\\u83ab\\u5b50\\u5100", "duration_seconds": 55}'}}
2025-08-12 00:00:15,112 - db.database - INFO - ✅ 任務 6509f377-dfda-4a1a-9997-97645a383531 狀態已更新為: completed
2025-08-12 00:00:15,112 - DBManagerServer - INFO - 連線 ('127.0.0.1', 34744) 已關閉。
2025-08-12 00:00:15,113 - DBManagerServer - INFO - 來自 ('127.0.0.1', 34748) 的新連線。
2025-08-12 00:00:15,113 - DBManagerServer - INFO - 收到請求: {'action': 'find_dependent_task', 'params': {'parent_task_id': '6509f377-dfda-4a1a-9997-97645a383531'}}
2025-08-12 00:00:15,114 - DBManagerServer - INFO - 連線 ('127.0.0.1', 34748) 已關閉。
2025-08-12 00:00:15,114 - DBManagerServer - INFO - 來自 ('127.0.0.1', 34760) 的新連線。
2025-08-12 00:00:15,115 - DBManagerServer - INFO - 收到請求: {'action': 'get_task_status', 'params': {'task_id': '468af73e-8c5b-466a-8163-d83e2f7e7f39'}}
2025-08-12 00:00:15,115 - DBManagerServer - INFO - 連線 ('127.0.0.1', 34760) 已關閉。
2025-08-12 00:00:16,404 - DBManagerServer - INFO - 來自 ('127.0.0.1', 34770) 的新連線。
2025-08-12 00:00:16,404 - DBManagerServer - INFO - 收到請求: {'action': 'update_task_status', 'params': {'task_id': '468af73e-8c5b-466a-8163-d83e2f7e7f39', 'status': 'failed', 'result': '{"error": "Gemini processor failed with exit code 1. Stderr: {\\"type\\": \\"result\\", \\"status\\": \\"failed\\", \\"error\\": \\"GOOGLE_API_KEY environment variable not set.\\"}\\n"}'}}
2025-08-12 00:00:16,406 - db.database - INFO - ✅ 任務 468af73e-8c5b-466a-8163-d83e2f7e7f39 狀態已更新為: failed
2025-08-12 00:00:16,407 - DBManagerServer - INFO - 連線 ('127.0.0.1', 34770) 已關閉。
2025-08-12 00:00:19,914 - DBManagerServer - INFO - 來自 ('127.0.0.1', 34784) 的新連線。
2025-08-12 00:00:19,915 - DBManagerServer - INFO - 收到請求: {'action': 'get_task_status', 'params': {'task_id': '468af73e-8c5b-466a-8163-d83e2f7e7f39'}}
2025-08-12 00:00:19,916 - DBManagerServer - INFO - 連線 ('127.0.0.1', 34784) 已關閉。
2025-08-12 00:00:19,923 - DBManagerServer - INFO - 來自 ('127.0.0.1', 34796) 的新連線。
2025-08-12 00:00:19,923 - DBManagerServer - INFO - 收到請求: {'action': 'get_task_status', 'params': {'task_id': '468af73e-8c5b-466a-8163-d83e2f7e7f39'}}
2025-08-12 00:00:19,924 - DBManagerServer - INFO - 連線 ('127.0.0.1', 34796) 已關閉。
2025-08-12 00:01:01,020 - DBManagerServer - INFO - 資料庫管理者伺服器啟動前，正在進行資料庫初始化...
2025-08-12 00:01:01,021 - db.database - INFO - 正在檢查並初始化資料庫於: /app/db/queue.db
2025-08-12 00:01:01,047 - db.database - INFO - ✅ 資料庫初始化完成。`tasks` 和 `system_logs` 資料表已存在。
2025-08-12 00:01:01,077 - DBManagerServer - INFO - ✅ 資料庫初始化成功。
2025-08-12 00:01:01,077 - DBManagerServer - INFO - 🚀 資料庫管理者伺服器已在 127.0.0.1:49999 上啟動...
2025-08-12 00:01:02,478 - DBManagerServer - INFO - 來自 ('127.0.0.1', 42624) 的新連線。
2025-08-12 00:01:02,479 - DBManagerServer - INFO - 收到請求: {'action': 'add_task', 'params': {'task_id': '23716551-9683-4f56-963c-8a177120080d', 'payload': '{"url": "https://www.youtube.com/watch?v=jNQXAC9IVRw", "output_dir": "/app/uploads", "custom_filename": ""}', 'task_type': 'youtube_download', 'depends_on': None}}
2025-08-12 00:01:02,479 - db.database - INFO - DB:/app/db/queue.db 準備新增 'youtube_download' 任務: 23716551-9683-4f56-963c-8a177120080d (依賴: 無)
2025-08-12 00:01:02,482 - db.database - INFO - ✅ 已成功新增任務到佇列: 23716551-9683-4f56-963c-8a177120080d
2025-08-12 00:01:02,483 - DBManagerServer - INFO - 連線 ('127.0.0.1', 42624) 已關閉。
2025-08-12 00:01:02,484 - DBManagerServer - INFO - 來自 ('127.0.0.1', 42628) 的新連線。
2025-08-12 00:01:02,485 - DBManagerServer - INFO - 收到請求: {'action': 'add_task', 'params': {'task_id': '24409176-460f-453c-8177-e3b7ac41ba26', 'payload': '{"model": "models/gemini-1.5-flash-latest", "output_dir": "transcripts", "tasks": "summary,transcript", "output_format": "html"}', 'task_type': 'gemini_process', 'depends_on': '23716551-9683-4f56-963c-8a177120080d'}}
2025-08-12 00:01:02,485 - db.database - INFO - DB:/app/db/queue.db 準備新增 'gemini_process' 任務: 24409176-460f-453c-8177-e3b7ac41ba26 (依賴: 23716551-9683-4f56-963c-8a177120080d)
2025-08-12 00:01:02,488 - db.database - INFO - ✅ 已成功新增任務到佇列: 24409176-460f-453c-8177-e3b7ac41ba26
2025-08-12 00:01:02,489 - DBManagerServer - INFO - 連線 ('127.0.0.1', 42628) 已關閉。
2025-08-12 00:01:02,502 - DBManagerServer - INFO - 來自 ('127.0.0.1', 42640) 的新連線。
2025-08-12 00:01:02,502 - DBManagerServer - INFO - 收到請求: {'action': 'find_dependent_task', 'params': {'parent_task_id': '23716551-9683-4f56-963c-8a177120080d'}}
2025-08-12 00:01:02,504 - DBManagerServer - INFO - 連線 ('127.0.0.1', 42640) 已關閉。
2025-08-12 00:01:02,512 - DBManagerServer - INFO - 來自 ('127.0.0.1', 42652) 的新連線。
2025-08-12 00:01:02,512 - DBManagerServer - INFO - 收到請求: {'action': 'get_task_status', 'params': {'task_id': '23716551-9683-4f56-963c-8a177120080d'}}
2025-08-12 00:01:02,513 - DBManagerServer - INFO - 連線 ('127.0.0.1', 42652) 已關閉。
2025-08-12 00:01:02,518 - DBManagerServer - INFO - 來自 ('127.0.0.1', 42654) 的新連線。
2025-08-12 00:01:02,518 - DBManagerServer - INFO - 收到請求: {'action': 'get_task_status', 'params': {'task_id': '24409176-460f-453c-8177-e3b7ac41ba26'}}
2025-08-12 00:01:02,520 - DBManagerServer - INFO - 連線 ('127.0.0.1', 42654) 已關閉。
2025-08-12 00:01:02,930 - DBManagerServer - INFO - 來自 ('127.0.0.1', 42656) 的新連線。
2025-08-12 00:01:02,930 - DBManagerServer - INFO - 收到請求: {'action': 'update_task_status', 'params': {'task_id': '23716551-9683-4f56-963c-8a177120080d', 'status': 'completed', 'result': '{"type": "result", "status": "completed", "output_path": "/app/uploads/dummy_audio.wav", "video_title": "\\u3010\\u5927\\u795e\\u5e6b\\u5e6b\\u5fd9\\u3011\\u5c0e\\u6f14\\u7684\\u5275\\u696d\\u8ac7 feat.\\u6a13\\u4e00\\u5b89\\u5c0e\\u6f14\\u3001\\u694a\\u8cb4\\u5a9a\\u3001\\u8521\\u6dd1\\u81fb\\u3001\\u83ab\\u5b50\\u5100", "duration_seconds": 55}'}}
2025-08-12 00:01:02,933 - db.database - INFO - ✅ 任務 23716551-9683-4f56-963c-8a177120080d 狀態已更新為: completed
2025-08-12 00:01:02,935 - DBManagerServer - INFO - 連線 ('127.0.0.1', 42656) 已關閉。
2025-08-12 00:01:02,935 - DBManagerServer - INFO - 來自 ('127.0.0.1', 42672) 的新連線。
2025-08-12 00:01:02,936 - DBManagerServer - INFO - 收到請求: {'action': 'find_dependent_task', 'params': {'parent_task_id': '23716551-9683-4f56-963c-8a177120080d'}}
2025-08-12 00:01:02,937 - DBManagerServer - INFO - 連線 ('127.0.0.1', 42672) 已關閉。
2025-08-12 00:01:02,937 - DBManagerServer - INFO - 來自 ('127.0.0.1', 42688) 的新連線。
2025-08-12 00:01:02,937 - DBManagerServer - INFO - 收到請求: {'action': 'get_task_status', 'params': {'task_id': '24409176-460f-453c-8177-e3b7ac41ba26'}}
2025-08-12 00:01:02,939 - DBManagerServer - INFO - 連線 ('127.0.0.1', 42688) 已關閉。
2025-08-12 00:01:04,841 - DBManagerServer - INFO - 來自 ('127.0.0.1', 42702) 的新連線。
2025-08-12 00:01:04,842 - DBManagerServer - INFO - 收到請求: {'action': 'update_task_status', 'params': {'task_id': '24409176-460f-453c-8177-e3b7ac41ba26', 'status': 'failed', 'result': '{"error": "Gemini processor failed with exit code 1. Stderr: {\\"type\\": \\"result\\", \\"status\\": \\"failed\\", \\"error\\": \\"GOOGLE_API_KEY environment variable not set.\\"}\\n"}'}}
2025-08-12 00:01:04,845 - db.database - INFO - ✅ 任務 24409176-460f-453c-8177-e3b7ac41ba26 狀態已更新為: failed
2025-08-12 00:01:04,846 - DBManagerServer - INFO - 連線 ('127.0.0.1', 42702) 已關閉。
2025-08-12 00:01:07,529 - DBManagerServer - INFO - 來自 ('127.0.0.1', 42708) 的新連線。
2025-08-12 00:01:07,529 - DBManagerServer - INFO - 收到請求: {'action': 'get_task_status', 'params': {'task_id': '24409176-460f-453c-8177-e3b7ac41ba26'}}
2025-08-12 00:01:07,530 - DBManagerServer - INFO - 連線 ('127.0.0.1', 42708) 已關閉。
2025-08-12 00:01:07,537 - DBManagerServer - INFO - 來自 ('127.0.0.1', 42724) 的新連線。
2025-08-12 00:01:07,537 - DBManagerServer - INFO - 收到請求: {'action': 'get_task_status', 'params': {'task_id': '24409176-460f-453c-8177-e3b7ac41ba26'}}
2025-08-12 00:01:07,538 - DBManagerServer - INFO - 連線 ('127.0.0.1', 42724) 已關閉。
